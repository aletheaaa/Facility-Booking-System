<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	
	<title>FBS</title>
	
	<!-- Google font -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
	
	<!-- Bootstrap -->
	<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />
	
	<!-- Custom stlylesheet -->
	<link type="text/css" rel="stylesheet" href="css/style.css" />
	
	<!-- Vue 3 -->
	<script src='https://cdn.jsdelivr.net/npm/vue@3.0.2/dist/vue.global.js'></script>
	
	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
		
</head>
	
	<body id="app">
		<div id="booking" class="section" v-show="!displayRooms">
			<div class="section-center">
				<div class="container">
					<div class="row">
						<div class="col-md-7 col-md-push-5">
							<div class="booking-cta">
								<h1>SMU Facilities Booking System</h1>
							</div>
						</div>
						<div class="col-md-5 col-md-pull-7">
							<div class="booking-form">
								<div class="form-group">
									<span class="form-label">Room Location</span>
									<select class="form-control" id="location" v-model="roomlocation">
										<option value="soa">SOA</option>
										<option value="sob">SOB</option>
										<option value="scis">SCIS</option>
										<option value="soe">SOE</option>
										<option value="soss">SOSS</option>
									</select>
									<span class="select-arrow"></span>
								</div>
								<div class="form-group">
									<span class="form-label">Room Type</span>
									<select class="form-control" id="roomtype" v-model="roomtype">
										<option value="seminar">Seminar Room</option>
										<option value="Group Study Room">Group Study Room</option>
										<option value="classroom">Classroom</option>
									</select>
									<span class="select-arrow"></span>
								</div>
								<div class="form-group">
									<span class="form-label">Date</span>
									<input class="form-control" type="date" id="date" v-model="date" required>
								</div>
								<div class="row">
									<div class="col-sm-6">
										<div class="form-group">
											<span class="form-label">Start Time</span>
											<select name="time" id="time" class="form-control" v-model="starttime">
												<option value="0800">0800</option>
												<option value="0830">0830</option>
												<option value="0900">0900</option>
												<option value="0930">0930</option>
												<option value="1000">1000</option>
												<option value="1030">1030</option>
												<option value="1100">1100</option>
												<option value="1130">1130</option>
												<option value="1200">1200</option>
												<option value="1230">1230</option>
												<option value="1300">1300</option>
												<option value="1330">1330</option>
												<option value="1400">1400</option>
												<option value="1430">1430</option>
												<option value="1500">1500</option>
												<option value="1530">1530</option>
												<option value="1600">1600</option>
												<option value="1630">1630</option>
												<option value="1700">1700</option>
												<option value="1730">1730</option>
												<option value="1800">1800</option>
												<option value="1830">1830</option>
												<option value="1900">1900</option>
												<option value="1930">1930</option>
												<option value="2000">2000</option>
												<option value="2030">2030</option>
												<option value="2100">2100</option>
												<option value="2130">2130</option>
												<option value="2200">2200</option>
											</select>
											<span class="select-arrow"></span>
										</div>
									</div>
									<div class="col-sm-6">
										<div class="form-group">
											<span class="form-label">Duration</span>
											<select class="form-control" id="duration" v-model="duration">
												<option>1</option>
												<option>2</option>
												<option>3</option>
											</select>
											<span class="select-arrow"></span>
										</div>
									</div>
								</div>
								<div class="form-btn">
									<button class="submit-btn" @click="findRooms()">Find rooms</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div id="rooms" class="section" v-show="displayRooms">
			<table class="table table-striped" v-if="rooms">
				<thead>
					<tr>
						<th scope="col">Room ID</th>
						<th scope="col">Room Name</th>
						<th scope="col">Room Type</th>
						<th scope="col">Room Location</th>
						<th scope="col">Room Status</th>
						<th scope="col">Room Booking</th>
						<th scope="col">Book Room</th>
					</tr>
				</thead>
				<tbody>
					<tr v-for="room in rooms">
						<th scope="row">{{room.room_id}}</th>
						<td>{{room.room_name}}</td>
						<td>{{room.room_type}}</td>
						<td>{{room.room_location}}</td>
						<td>{{room.room_status}}</td>
						<td>{{room.room_booking}}</td>
						<td><button class="submit-btn" @click="bookRoom()">Book Room</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</body>
	
	</html>
	<script>
		const get_rooms = "http://localhost:8080/rooms";
		
		//instatntiate vue app
		const app = Vue.createApp({
			data() {
				return {
					roomlocation: "",
					roomtype: "",
					date: "2021-05-01",
					starttime: "0800",
					duration: "",
					displayRooms: false,
					rooms: [],
					room: true,
					
				}
			},
			methods: {
				findRooms() {
					this.displayRooms = true;
					console.log(this.roomlocation);
					console.log(this.roomtype);
					console.log(this.date);
					console.log(this.starttime);
					console.log(this.duration);
					//fetch rooms 
					// fetch(`${get_rooms}?location=${this.roomlocation}&type=${this.roomtype}&date=${this.date}&starttime=${this.starttime}&duration=${this.duration}}`,
					fetch(`${get_rooms}`,
					{
						method: "GET",
						headers: {
							"Content-type": "application/json"
						},
						body: jsonData
					})
					.then(response => response.json())
					.then(data => {
						this.rooms = data;
						console.log(this.rooms);
						
					})
					.catch(error => {
						// Errors when calling the service; such as network error, 
						// service offline, etc
						console.log(this.message + error);
						
					});
				},
				bookRoom() {
					console.log("book room");
				}
			}
			
		});
		const vm = app.mount('#app');
		
		
	</script>